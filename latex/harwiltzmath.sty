\usepackage{amsmath,amssymb,amsfonts,amsthm}
\usepackage{ifthen}
\usepackage{mathrsfs}
\usepackage{tikz}
\usetikzlibrary{arrows}
\usepackage{pgfplots}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
\newtheorem{proposition}{Proposition}
\theoremstyle{definition}
\newtheorem{defbasic}{Definition}
\newtheorem{assumption}{Assumption}
\newtheorem{remark}{Remark}

\newcommand{\myrule}{
  \begin{center}
    \begin{tikzpicture}
      \draw[diamond-diamond](0,0) to (0.25\linewidth,0);
    \end{tikzpicture}
  \end{center}
}

\newenvironment{definition}{%
  \begin{defbasic}
  }{%
  \end{defbasic}
  \myrule
}

\newcommand{\Expectation}[2]{\underset{#1}{\mathbf{E}}\left[#2\right]}
\newcommand{\expectation}[2]{\mathbf{E}_{#1}\left[#2\right]}
\newcommand{\Expect}[1]{\Expectation{}{#1}}
\newcommand{\Conditional}[2]{\left. #1\ \right\rvert\ #2}
\newcommand{\ConditionalExpectation}[3]{\Expectation{#1}{\Conditional{#2}{#3}}}
\newcommand{\ConditionExpect}[2]{\Expect{\Conditional{#1}{#2}}}
\newcommand{\indicator}[1]{\mathbf{1}_{\left[#1\right]}}
\newcommand{\deriv}[2]{\frac{d #1}{d #2}}
\newcommand{\partialderiv}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\firstvariation}[2]{\frac{\delta #1}{\delta #2}}
\newcommand{\hessian}[1]{\mathsf{H}_{#1}}
\newcommand{\jacobian}{\mathsf{J}}
\newcommand{\characteristic}[1]{\chi_{#1}}
\newcommand{\dirac}[1]{\delta_{#1}}
\newcommand{\kl}[2]{D_{\text{KL}}\left(\left. #1\ \right\|\ #2\right)}
\newcommand{\cdf}[1]{F_{#1}}
\newcommand{\quantile}[1]{q_{#1}}
\newcommand{\statistics}[1][]{\widehat{\mathbf{s}}_{#1}}
\newcommand{\uniform}[1]{\mathsf{U}\left(#1\right)}
\newcommand{\law}[1]{\text{Law}\left(#1\right)}
\newcommand{\gaussian}[2]{\mathcal{N}\left(#1, #2\right)}
\newcommand{\pushforward}[2]{#1_\sharp #2}
% Process notation
% args: condition, param, inner
\newcommand{\indexed}[3]{\left(#3_{#2}\right)_{#2 #1}}
\newcommand{\indexedabove}[3][0]{\indexed{\geq #1}{#2}{#3}}
\newcommand{\indexedin}[3]{\indexed{\in #1}{#2}{#3}}
\newcommand{\indexedint}[4][1]{\left\{{#4}_{#2}\right\}_{#2=#1}^{#3}}
\newcommand{\sequence}[3][1]{\indexedint[#1]{#2}{\infty}{#3}}
\newcommand{\subsequence}[4][1]{\left\{#4_{#3_#2}\right\}_{#2=#1}^\infty}
% Tuple processes
\newcommand{\iindexed}[4]{\left(#3_{#2}, #4_{#2}\right)_{#2 #1}}
\newcommand{\iindexedabove}[4][0]{\iindexed{\geq #1}{#2}{#3}{#4}}
\newcommand{\iindexedin}[4]{\iindexed{\in #1}{#2}{#3}{#4}}

\newcommand{\proj}[1]{\iota_{#1}}
\newcommand{\probset}[1]{\mathcal{P}\left(#1\right)}
\newcommand{\wassersteinspace}[2][2]{\mathbf{W}_{#1}\left(#2\right)}
\newcommand{\wasserspace}[1][2]{\mathbf{W}_{#1}}
\newcommand{\wassersteinmetric}[2][2]{d_{\wassersteinspace[#1]{#2}}}
\newcommand{\wassermetric}[1][2]{d_{\wasserspace[#1]}}
\newcommand{\bellmanoperator}[1][\pi]{\mathscr{T}^{#1}}

\newcommand{\norm}[2][ ]{\left\|#2\right\|_{#1}}
\newcommand{\lpnorm}[3][ ]{\norm[L^{#2}#1]{#3}}
\newcommand{\innerproduct}[3][ ]{\left\langle #2, #3\right\rangle_{#1}}

\newcommand{\Span}[1]{\text{span}\left(#1\right)}
\newcommand{\ClSpan}[1]{\overline{\Span{#1}}}

%%% The following is a shortcut for represent <x|A|y> or x^T A y
\newcommand\usequantumnotation{true}
\newcommand{\measurement}[3]{
  \ifthenelse{ \equal{\usequantumnotation}{true} }{
    \left\langle #1\left\lvert #2\right\rvert #3\right\rangle
  }{
    #1^\top #2 #3
  }
}
\newcommand{\quadraticform}[2]{\measurement{#1}{#2}{#1}}

% For writing assignment solutions
\newenvironment{problem}[1]{%
  #1\hfill

  \hrulefill\\
}{\hfill$\blacksquare$}

\DeclareMathOperator{\support}{supp}
\DeclareMathOperator{\identity}{\mathsf{id}}
\DeclareMathOperator{\trace}{\mathsf{Tr}}
\DeclareMathOperator{\range}{\mathsf{Ran}}
\DeclareMathOperator{\kernel}{\mathsf{Ker}}
\DeclareMathOperator{\returnfunction}{\mathscr{J}}
\DeclareMathOperator{\rewardfunctional}{\mathsf{J}}
\DeclareMathOperator{\jointspace}{\mathcal{Z}}
\DeclareMathOperator{\returndistribution}{\varrho}
\DeclareMathOperator{\returnmeasure}{\eta}
\DeclareMathOperator{\bootstrap}{\mathsf{J}}
\DeclareMathOperator{\timeshift}{\mathsf{T}}
\DeclareMathOperator{\invtimeshift}{\overleftarrow{\timeshift}}
\DeclareMathOperator{\fortimeshift}{\overrightarrow{\timeshift}}
\DeclareMathOperator{\eqlaw}{\overset{\mathcal{L}}{=}}
\DeclareMathOperator{\returnspace}{\mathcal{R}}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Textual shortcuts   %%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Ito}{Itô}
\newcommand{\cadlag}{càdlàg}
